# r1_rest_apis.yaml
# O-RAN R1 REST API definitions - PURE R1 INTERFACE ONLY
# Aligned with O-RAN.WG2.R1AP-v06.00, O-RAN.WG2.R1GAP-v09.00, O-RAN.WG2.R1TD-v03.00
# and 3GPP CAPIF (TS 29.222)
# =========================================================================
#
# IMPORTANT: This file contains ONLY R1 interface APIs (rApp ↔ SMO).
# O1 (OAM) and O2 (Infrastructure) APIs are NOT included.
#
# R1 Interface Sections:
#   - 5.1 Service Management (CAPIF-aligned)
#   - 5.2 Data Management (R1-DME)
#   - 5.3 A1 Policy Services (R1-AP)
#   - 5.6 AI/ML Workflow Services (R1-AIML)
#   - 5.7 rApp Management Services
#
# NOT INCLUDED (separate interfaces):
#   - O1 Interface: SMO ↔ O-RAN NFs (OAM, Config, FM, PM)
#   - O2 Interface: SMO ↔ O-Cloud (Infrastructure)
#
# URI Pattern Reference (R1AP-compliant):
#   - Service Publishing:    /capif-publish/v1/{apfId}/service-apis
#   - Service Discovery:     /capif-discover/v1/allServiceAPIs
#   - DME Type Discovery:    /data-discovery/v2/dme-types
#   - Data Access (Jobs):    /data-access/v1/data-jobs
#   - Data Producer:         /data-producer/v1/registrations
#   - A1 Policy:             /a1-policy-management/v1/policies
#   - AI/ML:                 /r1-aiml/v1/mlModels
#   - rApp Management:       /r1-rapp-management/v1/rapps
# =========================================================================

# SECTION 5.1: Service Management and Exposure (CAPIF-aligned)
bootstrap:
  - name: "Get bootstrap information"
    uri: "{apiRoot}/bootstrap/v1/bootstrap-info"
    method: "GET"
    response_code: 200
    example_payload: null
    example_response:
      apiRoot: "https://smo.example.com"
      serviceEndpoints:
        capifPublish: "/capif-publish/v1"
        capifDiscover: "/capif-discover/v1"
        a1PolicyManagement: "/a1-policy-management/v1"
        dataManagement: "/r1-data-management/v1"

service_registration:
  - name: "Register API service"
    uri: "{apiRoot}/capif-publish/v1/{apfId}/service-apis"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/capif-publish/v1/{apfId}/service-apis/{serviceApiId}"
    example_payload:
      apiName: "rApp-TrafficOptimization"
      aefProfiles:
        - aefId: "aef-001"
          versions:
            - apiVersion: "v1"
              resources:
                - resourceName: "traffic-data"
                  commType: "REQUEST_RESPONSE"
                  uri: "/traffic/data"
                  operations: ["GET", "POST"]
          protocol: "HTTP_1_1"
          dataFormat: "JSON"
          securityMethods: ["OAUTH"]
          interfaceDescriptions:
            - ipv4Addr: "192.168.1.100"
              port: 8443
      description: "Traffic optimization rApp service API"
      supportedFeatures: "0"

  - name: "Get API service details"
    uri: "{apiRoot}/capif-publish/v1/{apfId}/service-apis/{serviceApiId}"
    method: "GET"
    response_code: 200
    example_payload: null

  - name: "Update API service"
    uri: "{apiRoot}/capif-publish/v1/{apfId}/service-apis/{serviceApiId}"
    method: "PUT"
    response_code: 200
    example_payload:
      apiName: "rApp-TrafficOptimization"
      aefProfiles:
        - aefId: "aef-001"
          versions:
            - apiVersion: "v2"
              resources:
                - resourceName: "traffic-data"
                  commType: "REQUEST_RESPONSE"
                  uri: "/traffic/data"
                  operations: ["GET", "POST", "DELETE"]
          protocol: "HTTP_2"
          dataFormat: "JSON"
          securityMethods: ["OAUTH"]

  - name: "Delete API service"
    uri: "{apiRoot}/capif-publish/v1/{apfId}/service-apis/{serviceApiId}"
    method: "DELETE"
    response_code: 204
    example_payload: null

service_discovery:
  - name: "Discover all service APIs"
    uri: "{apiRoot}/capif-discover/v1/allServiceAPIs"
    method: "GET"
    response_code: 200
    query_params:
      - name: "api-invoker-id"
        required: true
      - name: "api-name"
        required: false
      - name: "api-version"
        required: false
      - name: "aef-id"
        required: false
    example_payload: null

  - name: "Subscribe to service availability"
    uri: "{apiRoot}/capif-events/v1/{subscriberId}/subscriptions"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/capif-events/v1/{subscriberId}/subscriptions/{subscriptionId}"
    example_payload:
      events:
        - "SERVICE_API_AVAILABLE"
        - "SERVICE_API_UNAVAILABLE"
      notificationDestination: "http://rapp.example.com/capif-notifications"
      eventFilters:
        - apiIds: ["api-001", "api-002"]
      supportedFeatures: "0"

  - name: "Unsubscribe from service availability"
    uri: "{apiRoot}/capif-events/v1/{subscriberId}/subscriptions/{subscriptionId}"
    method: "DELETE"
    response_code: 204
    example_payload: null

# SECTION 5.2: Data Management and Exposure (R1AP-compliant / R1-DME)
# Reference: O-RAN.WG2.R1AP-v06.00
#
# Key terminology:
#   - dmeTypeId: DME (Data Management & Exposure) type identifier
#   - dataJobId: Data job identifier (replaces infoJobId)
#   - DataJobInfo: Schema for data job creation
#   - dataDeliveryMode: CONTINUOUS | ONE_TIME
#   - dataDeliveryMethod: PUSH_HTTP | PULL_HTTP | STREAMING_KAFKA

# --- Data Producer Registration ---
data_producer_registration:
  - name: "Register as DME data producer"
    uri: "{apiRoot}/data-producer/v1/registrations"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/data-producer/v1/registrations/{producerRegistrationId}"
    example_payload:
      producerId: "producer-001"
      producerType: "DATA_PRODUCER"
      supportedDmeTypes:
        - dmeTypeId: "oran:coverage-kpis:1.0.0"
          productionJobDefinitionSchema:
            type: "object"
            properties:
              cellIdList:
                type: "array"
                items:
                  type: "string"
              measurementTypes:
                type: "array"
                items:
                  type: "string"
          supportedDeliveryMethods: ["PUSH_HTTP", "STREAMING_KAFKA"]
          dataDeliverySchemaId: "coverage-kpi-delivery-schema-v1"
      jobCallbackUri: "http://rapp.example.com/data-producer/job-callback"

  - name: "Get producer registration"
    uri: "{apiRoot}/data-producer/v1/registrations/{producerRegistrationId}"
    method: "GET"
    response_code: 200
    example_payload: null

  - name: "Update producer registration"
    uri: "{apiRoot}/data-producer/v1/registrations/{producerRegistrationId}"
    method: "PUT"
    response_code: 200
    example_payload:
      producerId: "producer-001"
      supportedDmeTypes:
        - dmeTypeId: "oran:coverage-kpis:1.0.0"
          supportedDeliveryMethods: ["PUSH_HTTP", "PULL_HTTP", "STREAMING_KAFKA"]

  - name: "Deregister data producer"
    uri: "{apiRoot}/data-producer/v1/registrations/{producerRegistrationId}"
    method: "DELETE"
    response_code: 204
    example_payload: null

# --- DME Type Discovery ---
# Reference: O-RAN.WG2.R1AP-v06.00 Section on Data Discovery
# Response type: array(DmeTypeRelatedCapabilities) - defined in R1AP OpenAPI
#
# dmeTypeId format: String in form "<namespace>:<name>:<version>"
#   Example: "oran:coverage-kpis:1.0.0"
#   Note: Version is commonly semantic (e.g., "1.0.0") for interoperability
#
# data-category query param:
#   - Values are IMPLEMENTATION-DEPENDENT (check your SMO's supported values)
#   - R1AP defines the parameter but exact enum values vary by implementation
#   - Safest approach: query without filter first, then use returned values
#
# IMPORTANT: Response field names below are ILLUSTRATIVE.
# Actual field names must match DmeTypeRelatedCapabilities as defined in R1AP OpenAPI.
# Consult your R1AP version for exact wire-format field names.
data_discovery:
  - name: "Discover all DME types"
    uri: "{apiRoot}/data-discovery/v2/dme-types"
    method: "GET"
    response_code: 200
    query_params:
      - name: "dme-type-id"
        required: false
        description: "Filter by specific DME type identifier (string format)"
      - name: "data-category"
        required: false
        description: "Filter by data category (IMPLEMENTATION-DEPENDENT - use values from your SMO)"
    example_payload: null
    example_response:
      # Response is array(DmeTypeRelatedCapabilities) per R1AP OpenAPI
      # dmeTypeId is a STRING: "<namespace>:<name>:<version>"
      # NOTE: Field names below are ILLUSTRATIVE - verify against your R1AP spec
      - dmeTypeDefinition:
          dmeTypeId: "oran:coverage-kpis:1.0.0"
          dataProductionSchema:
            type: "object"
            properties:
              cellIdList:
                type: "array"
                items:
                  type: "string"
              measurementTypes:
                type: "array"
                items:
                  type: "string"
              reportingPeriod:
                type: "integer"
                minimum: 1
          dataDeliverySchemas:
            - schemaId: "coverage-kpi-delivery-schema-v1"
              schema:
                type: "object"
                properties:
                  cellId:
                    type: "string"
                  rsrp_dbm:
                    type: "number"
                  rsrq_db:
                    type: "number"
                  sinr_db:
                    type: "number"
        dataAccessEndpoint: "https://smo.operator.com/data-access/v1"
        dataDeliveryModes:
          - deliveryMode: "CONTINUOUS"
            supportedDeliveryMethods: ["PUSH_HTTP", "STREAMING_KAFKA"]
          - deliveryMode: "ONE_TIME"
            supportedDeliveryMethods: ["PUSH_HTTP", "PULL_HTTP"]
      - dmeTypeDefinition:
          dmeTypeId: "oran:capacity-kpis:1.0.0"
        dataAccessEndpoint: "https://smo.operator.com/data-access/v1"
        dataDeliveryModes:
          - deliveryMode: "CONTINUOUS"
            supportedDeliveryMethods: ["PUSH_HTTP", "STREAMING_KAFKA"]
      - dmeTypeDefinition:
          dmeTypeId: "oran:cell-config:1.0.0"
        dataAccessEndpoint: "https://smo.operator.com/data-access/v1"
        dataDeliveryModes:
          - deliveryMode: "ONE_TIME"
            supportedDeliveryMethods: ["PUSH_HTTP", "PULL_HTTP"]

  - name: "Get DME type details"
    uri: "{apiRoot}/data-discovery/v2/dme-types/{dmeTypeId}"
    method: "GET"
    response_code: 200
    example_payload: null

  - name: "Subscribe to DME type availability changes"
    uri: "{apiRoot}/data-discovery/v2/dme-type-subscriptions"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/data-discovery/v2/dme-type-subscriptions/{subscriptionId}"
    example_payload:
      callbackUri: "http://rapp.example.com/dme-type-notifications"
      # dataCategory filter values are IMPLEMENTATION-DEPENDENT
      dmeTypeFilters: []
      eventTypes: ["DME_TYPE_AVAILABLE", "DME_TYPE_UNAVAILABLE"]

  - name: "Delete DME type subscription"
    uri: "{apiRoot}/data-discovery/v2/dme-type-subscriptions/{subscriptionId}"
    method: "DELETE"
    response_code: 204
    example_payload: null

# --- Data Access (Data Jobs) ---
# Reference: O-RAN.WG2.R1AP-v06.00 Section on Data Access
#
# dmeTypeId format: String "<namespace>:<name>:<version>"
#
# IMPORTANT: R1AP DataJobInfo attributes (normative):
#   - dmeTypeId, productionJobDefinition, dataDeliveryMode, dataDeliveryMethod
#   - dataDeliverySchemaId, pushDeliveryDetailsHttp/pullDeliveryDetailsHttp
#   - dataAvailabilityNotificationUri (optional - for DataAvailabilityNotification)
#
# NOTE: "jobOwner" is NOT part of R1AP DataJobInfo. Ownership should be
# determined via authN/authZ context (token subject) or vendor extension.
#
# PUSH_HTTP Data Delivery:
#   - R1AP does NOT define OpenAPI for HTTP-based Push data delivery
#   - Payload format is IMPLEMENTATION-SPECIFIC (defined by dataDeliverySchemaId)
#   - Wire format is NOT standardized by R1AP
#
# DataAvailabilityNotification (separate mechanism):
#   - Posted to dataAvailabilityNotificationUri with 204 No Content response
#   - Different from actual data push
data_access:
  - name: "Create data job"
    uri: "{apiRoot}/data-access/v1/data-jobs"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/data-access/v1/data-jobs/{dataJobId}"
    example_payload:
      dmeTypeId: "oran:coverage-kpis:1.0.0"
      productionJobDefinition:
        cellIdList: ["cell_1", "cell_2"]
        measurementTypes: ["rsrp_dbm", "rsrq_db", "sinr_db"]
        reportingPeriod: 60
      dataDeliveryMode: "CONTINUOUS"
      dataDeliveryMethod: "PUSH_HTTP"
      dataDeliverySchemaId: "coverage-kpi-delivery-schema-v1"
      pushDeliveryDetailsHttp:
        dataPushUri: "http://rapp.example.com/data-delivery/coverage"
    example_response:
      dataJobId: "job-12345"
      dmeTypeId: "oran:coverage-kpis:1.0.0"
      status: "RUNNING"

  - name: "Create one-time data request (PUSH)"
    uri: "{apiRoot}/data-access/v1/data-jobs"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/data-access/v1/data-jobs/{dataJobId}"
    example_payload:
      dmeTypeId: "oran:cell-config:1.0.0"
      productionJobDefinition:
        cellIdList: ["cell_1"]
        attributes: ["pMax", "nRPCI", "nRTAC"]
      dataDeliveryMode: "ONE_TIME"
      dataDeliveryMethod: "PUSH_HTTP"
      pushDeliveryDetailsHttp:
        dataPushUri: "http://rapp.example.com/data-delivery/config"

  # PULL_HTTP pattern: Consumer requests data, producer provides dataPullUri in response
  # For PULL_HTTP: consumer provides dataAvailabilityNotificationUri for producer to notify when ready
  # Producer provides pullDeliveryDetailsHttp.dataPullUri in response
  - name: "Create data job with PULL delivery"
    uri: "{apiRoot}/data-access/v1/data-jobs"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/data-access/v1/data-jobs/{dataJobId}"
    example_payload:
      dmeTypeId: "oran:pm-data:1.0.0"
      productionJobDefinition:
        cellIdList: ["cell_1", "cell_2"]
        measurementTypes: ["throughput_dl_mbps", "throughput_ul_mbps"]
        timeRange:
          startTime: "2024-01-14T00:00:00Z"
          endTime: "2024-01-15T00:00:00Z"
      dataDeliveryMode: "ONE_TIME"
      dataDeliveryMethod: "PULL_HTTP"
      dataDeliverySchemaId: "pm-data-schema-v1"
      # For PULL_HTTP: consumer provides notification URI for data availability
      dataAvailabilityNotificationUri: "http://rapp.example.com/notifications/data-ready"
    example_response:
      dataJobId: "job-pull-001"
      dmeTypeId: "oran:pm-data:1.0.0"
      status: "COMPLETED"
      # Producer provides the URI where consumer can pull data
      pullDeliveryDetailsHttp:
        dataPullUri: "https://data-producer.example.com/data/job-pull-001"

  - name: "Get data job"
    uri: "{apiRoot}/data-access/v1/data-jobs/{dataJobId}"
    method: "GET"
    response_code: 200
    example_payload: null
    example_response:
      dataJobId: "job-12345"
      dmeTypeId: "oran:coverage-kpis:1.0.0"
      status: "RUNNING"
      dataDeliveryMode: "CONTINUOUS"
      dataDeliveryMethod: "PUSH_HTTP"
      createdAt: "2024-01-15T10:00:00Z"

  - name: "Get data job status"
    uri: "{apiRoot}/data-access/v1/data-jobs/{dataJobId}/status"
    method: "GET"
    response_code: 200
    example_payload: null
    example_response:
      dataJobId: "job-12345"
      status: "RUNNING"
      lastDataDelivery: "2024-01-15T10:30:00Z"
      deliveryCount: 30

  - name: "Update data job"
    uri: "{apiRoot}/data-access/v1/data-jobs/{dataJobId}"
    method: "PUT"
    response_code: 200
    example_payload:
      dmeTypeId: "oran:coverage-kpis:1.0.0"
      productionJobDefinition:
        cellIdList: ["cell_1", "cell_2", "cell_3"]
        measurementTypes: ["rsrp_dbm", "rsrq_db", "sinr_db"]
        reportingPeriod: 30
      dataDeliveryMode: "CONTINUOUS"
      dataDeliveryMethod: "PUSH_HTTP"
      pushDeliveryDetailsHttp:
        dataPushUri: "http://rapp.example.com/data-delivery/coverage"

  - name: "Delete data job"
    uri: "{apiRoot}/data-access/v1/data-jobs/{dataJobId}"
    method: "DELETE"
    response_code: 204
    example_payload: null

  - name: "List all data jobs"
    uri: "{apiRoot}/data-access/v1/data-jobs"
    method: "GET"
    response_code: 200
    query_params:
      - name: "jobOwner"
        required: false
      - name: "dmeTypeId"
        required: false
      - name: "status"
        required: false
    example_payload: null

# --- Data Offers (for historical/bulk data) ---
data_offers:
  - name: "Create data offer"
    uri: "{apiRoot}/data-access/v1/data-offers"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/data-access/v1/data-offers/{dataOfferId}"
    example_payload:
      dmeTypeId: "oran:historical-kpis:1.0.0"
      dataCharacteristics:
        timeRange:
          startTime: "2024-01-01T00:00:00Z"
          endTime: "2024-01-31T23:59:59Z"
        granularityPeriod: 300
        cellIdList: ["cell_1", "cell_2"]
      supportedDeliveryMethod: "PULL_HTTP"
      offerExpirationTime: "2024-12-31T23:59:59Z"
      pullDeliveryDetailsHttp:
        dataFetchUri: "http://data-lake.example.com/kpi-data/batch-001"

  - name: "Get data offer"
    uri: "{apiRoot}/data-access/v1/data-offers/{dataOfferId}"
    method: "GET"
    response_code: 200
    example_payload: null

  - name: "Delete data offer"
    uri: "{apiRoot}/data-access/v1/data-offers/{dataOfferId}"
    method: "DELETE"
    response_code: 204
    example_payload: null

  - name: "Terminate data offer"
    uri: "{apiRoot}/r1-data-management/v1/data-offers/{offerId}"
    method: "DELETE"
    response_code: 204
    example_payload: null

# SECTION 5.3: A1-Related Services (R1-AP v5.0 compliant)
a1_policy_management:
  - name: "Get A1 policy types"
    uri: "{apiRoot}/a1-policy-management/v1/policy-types"
    method: "GET"
    response_code: 200
    example_payload: null

  - name: "Get A1 policy type schema"
    uri: "{apiRoot}/a1-policy-management/v1/policy-types/{policyTypeId}"
    method: "GET"
    response_code: 200
    example_payload: null

  - name: "Create A1 policy"
    uri: "{apiRoot}/a1-policy-management/v1/policies"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/a1-policy-management/v1/policies/{policyId}"
    example_payload:
      policyId: "policy-001"
      policyTypeId: "ORAN_QoSTarget_1.0.0"
      nearRtRicId: "ric-001"
      serviceAreaId: "sa-001"
      policyObject:
        scope:
          cellIdList: ["cell-1", "cell-2"]
          sliceId:
            sst: 1
            sd: "000001"
        qosObjectives:
          guaranteedBitRate: 10000
          packetDelayBudget: 20
      transient: false
      statusNotificationUri: "http://rapp.example.com/policy-status"

  - name: "Get A1 policy"
    uri: "{apiRoot}/a1-policy-management/v1/policies/{policyId}"
    method: "GET"
    response_code: 200
    example_payload: null

  - name: "Update A1 policy"
    uri: "{apiRoot}/a1-policy-management/v1/policies/{policyId}"
    method: "PUT"
    response_code: 200
    example_payload:
      policyId: "policy-001"
      policyTypeId: "ORAN_QoSTarget_1.0.0"
      nearRtRicId: "ric-001"
      policyObject:
        qosObjectives:
          guaranteedBitRate: 15000
          packetDelayBudget: 15

  - name: "Delete A1 policy"
    uri: "{apiRoot}/a1-policy-management/v1/policies/{policyId}"
    method: "DELETE"
    response_code: 204
    example_payload: null

  - name: "Query A1 policy status"
    uri: "{apiRoot}/a1-policy-management/v1/policies/{policyId}/status"
    method: "GET"
    response_code: 200
    example_payload: null

  - name: "Get Near-RT RICs"
    uri: "{apiRoot}/a1-policy-management/v1/rics"
    method: "GET"
    response_code: 200
    query_params:
      - name: "policytype_id"
        required: false
    example_payload: null

a1_enrichment_information:
  - name: "Register EI type"
    uri: "{apiRoot}/r1-a1-ei/v1/eitypes"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/r1-a1-ei/v1/eitypes/{eiTypeId}"
    example_payload:
      eiTypeId: "ue-location-data"
      eiJobParametersSchema:
        type: "object"
        properties:
          ueIdList:
            type: "array"
            items:
              type: "string"

  - name: "Get EI types"
    uri: "{apiRoot}/r1-a1-ei/v1/eitypes"
    method: "GET"
    response_code: 200
    example_payload: null

  - name: "Deregister EI type"
    uri: "{apiRoot}/r1-a1-ei/v1/eitypes/{eiTypeId}"
    method: "DELETE"
    response_code: 204
    example_payload: null

  - name: "Create EI job"
    uri: "{apiRoot}/r1-a1-ei/v1/eijobs"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/r1-a1-ei/v1/eijobs/{eiJobId}"
    example_payload:
      eiTypeId: "ue-location-data"
      jobDefinition:
        ueIdList: ["imsi-310150123456789"]
      targetUri: "http://rapp.example.com/ei-data"
      owner: "rapp-001"

# NOTE: O1 APIs (Section 5.4) and O2 APIs (Section 5.5) have been removed.
# This file contains ONLY pure R1 interface APIs for rApp ↔ SMO communication.
# O1 (OAM) and O2 (Infrastructure) are separate interfaces not part of R1.
#
# For O1 APIs, see: o1_rest_apis.yaml (if needed)
# For O2 APIs, see: o2_rest_apis.yaml (if needed)

# SECTION 5.6: AI/ML Workflow Services (R1-AIML aligned)
aiml_model_registration:
  - name: "Register AI/ML model"
    uri: "{apiRoot}/r1-aiml/v1/mlModels"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/r1-aiml/v1/mlModels/{modelId}"
    example_payload:
      modelName: "TrafficPredictor"
      modelVersion: "1.0.0"
      modelDescription: "Traffic prediction model for cell load forecasting"
      modelFramework: "PYTORCH"
      modelFormat: "ONNX"
      modelUri: "http://model-repo.example.com/models/traffic-predictor-v1"
      inputSchema:
        type: "object"
        properties:
          ueMetrics:
            type: "array"
            items:
              type: "number"
      outputSchema:
        type: "object"
        properties:
          prediction:
            type: "number"
      supportedFeatures: "0"

  - name: "Get AI/ML model details"
    uri: "{apiRoot}/r1-aiml/v1/mlModels/{modelId}"
    method: "GET"
    response_code: 200
    example_payload: null

  - name: "Update model registration"
    uri: "{apiRoot}/r1-aiml/v1/mlModels/{modelId}"
    method: "PUT"
    response_code: 200
    example_payload:
      modelName: "TrafficPredictor"
      modelVersion: "2.0.0"
      modelUri: "http://model-repo.example.com/models/traffic-predictor-v2"

  - name: "Deregister AI/ML model"
    uri: "{apiRoot}/r1-aiml/v1/mlModels/{modelId}"
    method: "DELETE"
    response_code: 204
    example_payload: null

aiml_model_storage:
  - name: "Store AI/ML model artifact"
    uri: "{apiRoot}/r1-aiml/v1/mlModelArtifacts"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/r1-aiml/v1/mlModelArtifacts/{artifactId}"
    example_payload:
      modelId: "model-001"
      artifactName: "traffic-predictor-weights"
      artifactFormat: "ONNX"
      artifactSize: 52428800
      checksum: "sha256:abc123..."

  - name: "Get model artifact"
    uri: "{apiRoot}/r1-aiml/v1/mlModelArtifacts/{artifactId}"
    method: "GET"
    response_code: 200
    example_payload: null

  - name: "Delete AI/ML model artifact"
    uri: "{apiRoot}/r1-aiml/v1/mlModelArtifacts/{artifactId}"
    method: "DELETE"
    response_code: 204
    example_payload: null

aiml_model_discovery:
  - name: "Discover AI/ML models"
    uri: "{apiRoot}/r1-aiml/v1/mlModels"
    method: "GET"
    response_code: 200
    query_params:
      - name: "modelFramework"
        required: false
      - name: "modelName"
        required: false
    example_payload: null

aiml_model_training:
  - name: "Request model training"
    uri: "{apiRoot}/r1-aiml/v1/mlTrainingJobs"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/r1-aiml/v1/mlTrainingJobs/{trainingJobId}"
    example_payload:
      trainingJobName: "training-job-001"
      modelId: "model-001"
      trainingDataUri: "http://data-lake.example.com/datasets/traffic-data-v1"
      hyperparameters:
        learningRate: 0.001
        batchSize: 32
        epochs: 100
        optimizer: "adam"
      resourceRequirements:
        gpuCount: 4
        cpuCores: 32
        memoryGb: 64
      callbackUri: "http://rapp.example.com/training-status"

  - name: "Query training job status"
    uri: "{apiRoot}/r1-aiml/v1/mlTrainingJobs/{trainingJobId}"
    method: "GET"
    response_code: 200
    example_payload: null

  - name: "Cancel model training"
    uri: "{apiRoot}/r1-aiml/v1/mlTrainingJobs/{trainingJobId}"
    method: "DELETE"
    response_code: 204
    example_payload: null

aiml_performance_monitoring:
  - name: "Subscribe to model performance"
    uri: "{apiRoot}/r1-aiml/v1/mlPerformanceSubscriptions"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/r1-aiml/v1/mlPerformanceSubscriptions/{subscriptionId}"
    example_payload:
      modelId: "model-001"
      performanceMetrics:
        - "accuracy"
        - "latency"
        - "inferenceCount"
        - "errorRate"
      reportingPeriod: 300
      notificationUri: "http://rapp.example.com/model-perf-notifications"

  - name: "Get performance subscription"
    uri: "{apiRoot}/r1-aiml/v1/mlPerformanceSubscriptions/{subscriptionId}"
    method: "GET"
    response_code: 200
    example_payload: null

  - name: "Unsubscribe from performance"
    uri: "{apiRoot}/r1-aiml/v1/mlPerformanceSubscriptions/{subscriptionId}"
    method: "DELETE"
    response_code: 204
    example_payload: null

aiml_model_inference:
  - name: "Query inference capabilities"
    uri: "{apiRoot}/r1-aiml/v1/mlInferenceCapabilities"
    method: "GET"
    response_code: 200
    example_payload: null

  - name: "Request model inference"
    uri: "{apiRoot}/r1-aiml/v1/mlInferenceJobs"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/r1-aiml/v1/mlInferenceJobs/{inferenceJobId}"
    example_payload:
      modelId: "model-001"
      inputData:
        ueMetrics: [1.2, 3.4, 5.6]
        cellMetrics:
          prbUtilization: 75
          activeUsers: 150
      inferenceMode: "SYNC"
      timeout: 5000

  - name: "Get inference result"
    uri: "{apiRoot}/r1-aiml/v1/mlInferenceJobs/{inferenceJobId}"
    method: "GET"
    response_code: 200
    example_payload: null

aiml_training_capability:
  - name: "Register training capability"
    uri: "{apiRoot}/r1-aiml/v1/mlTrainingCapabilities"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/r1-aiml/v1/mlTrainingCapabilities/{capabilityId}"
    example_payload:
      providerId: "rapp-trainer-001"
      supportedFrameworks:
        - framework: "PYTORCH"
          versions: ["1.13", "2.0", "2.1"]
        - framework: "TENSORFLOW"
          versions: ["2.12", "2.13"]
      resourceCapacity:
        maxGpuCount: 8
        maxCpuCores: 64
        maxMemoryGb: 256
      supportedDataFormats: ["CSV", "PARQUET", "TFRECORD"]

  - name: "Query training capabilities"
    uri: "{apiRoot}/r1-aiml/v1/mlTrainingCapabilities"
    method: "GET"
    response_code: 200
    example_payload: null

# SECTION 5.7: rApp Management Services (R1-rApp aligned)
rapp_registration:
  - name: "Register rApp"
    uri: "{apiRoot}/r1-rapp-management/v1/rapps"
    method: "POST"
    response_code: 201
    response_headers:
      Location: "{apiRoot}/r1-rapp-management/v1/rapps/{rAppId}"
    example_payload:
      rAppName: "rApp-TrafficOptimizer"
      rAppDescription: "Traffic optimization and load balancing rApp"
      vendor: "Nokia"
      softwareVersion: "1.0.0"
      rAppType: "SERVICE_PRODUCER"
      requiredServices:
        - serviceApiId: "a1-policy-management"
          version: "v1"
        - serviceApiId: "data-management"
          version: "v1"
      providedServices:
        - apiName: "traffic-optimization"
          apiVersion: "v1"
      securityRequirements:
        authenticationMethods: ["OAUTH"]
        requiredScopes: ["read:policies", "write:policies"]
      resourceRequirements:
        cpu: "1000m"
        memory: "1Gi"
        storage: "10Gi"

  - name: "Get rApp details"
    uri: "{apiRoot}/r1-rapp-management/v1/rapps/{rAppId}"
    method: "GET"
    response_code: 200
    example_payload: null

  - name: "Update rApp registration"
    uri: "{apiRoot}/r1-rapp-management/v1/rapps/{rAppId}"
    method: "PUT"
    response_code: 200
    example_payload:
      rAppName: "rApp-TrafficOptimizer"
      softwareVersion: "1.1.0"
      vendor: "Nokia"
      rAppType: "SERVICE_PRODUCER"

  - name: "Deregister rApp"
    uri: "{apiRoot}/r1-rapp-management/v1/rapps/{rAppId}"
    method: "DELETE"
    response_code: 204
    example_payload: null

  - name: "List all rApps"
    uri: "{apiRoot}/r1-rapp-management/v1/rapps"
    method: "GET"
    response_code: 200
    query_params:
      - name: "vendor"
        required: false
      - name: "rAppType"
        required: false
    example_payload: null

  - name: "Get rApp status"
    uri: "{apiRoot}/r1-rapp-management/v1/rapps/{rAppId}/status"
    method: "GET"
    response_code: 200
    example_payload: null
